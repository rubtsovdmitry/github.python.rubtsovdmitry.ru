<!DOCTYPE html>
<html lang="ru">
	<head>
		<meta name="Dmitry Rubtsov." content="Dmitry Rubtsov.">
		<meta name="generator" content="Bluefish 2.2.14" >
		<meta charset="utf-8">
		<meta name="robots" content="noindex, nofollow">
		<link rel="stylesheet" href="../content.css">		
		<title> 3. Задача о покрытии множества. </title>		
	</head>
	<body>
		<h1> 3. Задача о покрытии множества. </h1>
		<div> <a class="link_task" href="./greed_3_covering_set.html" target="_blank"> (открыть в новой вкладке) </a> </div>
		<hr>
		<div> 
			<span> Условие: </span> <br>
			<hr>
			Вы открываете собственную авторскую программу на радио и хотите, чтобы вас слушали во всех районах московской области.
			Нужно решить, на каких радиостанциях должна транслироваться ваша передача. Каждая станция стоит денег, поэтому количество станций необходимо свести к минимуму. <br>
			<br>
			Карта московской области с районами: <br>
			<br>
			<img src="../../pictures/moscow_map.jpg" alt=""> <br>
			<br>
			Имеется хеш-таблица станций с покрытием районов: <br>
			<br>
			<pre>
stations = {
    "Moscow station": {"Москва", "Ленинский", "Люберецкий", "Ногинский", "Щёлковский", "Пушкинский", "Дмитровский", "Солнечногорский", "Красногорский", "Одинцовский", "Новая Москва"},
    "Chehov station": {"Чеховский", "Новая Москва", "Домодедовский", "Ступинский", "Серпуховский"},
    "Ramenskoe": {"Раменский", "Ленинский", "Люберецкий", "Ногинский", "Павлово-Посадский", "Орехово-Зуевский", "Воскресенский", "Коломенский", "Ступинский", "Домодедовский", "Ленинский"},
    "Silver pond": {"Серебряно-прудский", "Каширский", "Озерский", "Луховицкий", "Зарайский"},
    "Kolomna station": {"Коломенский", "Раменский", "Воскресенский", "Егорьевский", "Луховицкий", "Озерский", "Ступинский"},
    "Egorievsk station": {"Егорьевский", "Луховицкий", "Коломенский", "Воскресенский", "Орехово-Зуевский", "Шатурский"},
    "Orehovo station": {"Орехово-Зуевский", "Шатурский", "Егорьевский", "Воскресенский", "Раменский", "Павлово-Посадский", "Ногинский"},
    "Noginsk": {"Ногинский", "Павлово-Посадский", "Раменский", "Люберецкий", "Москва", "Щёлковский", "Пушкинский"},
    "Dmitrov station": {"Дмитровский", "Талдомский", "Сергиево-Посадский", "Пушкинский", "Москва", "Солнечногорский", "Клинский"},
    "Sun station": {"Солнечногорский", "Клинский", "Дмитровский", "Москва", "Красногорский", "Истринский"},
    "Istra": {"Истринский", "Клинский", "Солнечногорский", "Красногорский", "Одинцовский", "Рузский", "Волоколамский"},
    "Ruza": {"Рузский", "Волоколамский", "Истринский", "Одинцовский", "Наро-Фоминский", "Можайский"},
    "Volokolamsk station": {"Волоколамский", "Клинский", "Истринский", "Рузский", "Можайский", "Шаховский", "Лотошинский"},
    "Mozaisk": {"Можайский", "Шаховский", "Волоколамский", "Рузский", "Наро-Фоминский"}
}
			</pre>		
			<br>
			Каждая станция покрывает определённый набор районов, эти наборы перекрываются. <br>
			<br>
			Нужно найти минимальный набор станций, который бы покрывал все районы. Для этого необходимо: <br>
			1. Составить список всех возможных подмножеств станций - так называемое степенное множество. В нём содержится 2^n возможных подмножеств. <br>
			2. Из этого списка выбирается множество с наименьшим набором станций, покрывающих все районы. <br>
			<br>
			Проблема в том, что вычисление всех возможных подмножеств станций займёт слишком много времени. Для n станций оно потребует времени О(2^n). <br>
			<br>
			На помощь приходят жадные алгоритмы. <br>
			<br>
			Нужно: <br>
			<br>
			1. Выбрать станцию, покрывающую наибольшее количество районов, ещё не входящих в покрытие. Если станция будет покрывать некоторые районы, уже входящие в покрытие, это нормально. <br>
			2. Повторять, пока остаются районы, не входящие в покрытие. <br>
			<br>
			Такой алгоритм будет приближённым и выполнится за время О(n^2), где n - количество радиостанций. 
		</div>		
		<hr>
		<div>
			<span> Код: </span>
		</div>
		<hr>
		<pre>
#####################
"""ВХОДНЫЕ ДАННЫЕ."""
#####################

stations = {
    "Moscow station": {"Москва", "Ленинский", "Люберецкий", "Ногинский", "Щёлковский", "Пушкинский", "Дмитровский", "Солнечногорский", "Красногорский", "Одинцовский", "Новая Москва"},
    "Chehov station": {"Чеховский", "Новая Москва", "Домодедовский", "Ступинский", "Серпуховский"},
    "Ramenskoe": {"Раменский", "Ленинский", "Люберецкий", "Ногинский", "Павлово-Посадский", "Орехово-Зуевский", "Воскресенский", "Коломенский", "Ступинский", "Домодедовский", "Ленинский"},
    "Silver pond": {"Серебряно-прудский", "Каширский", "Озерский", "Луховицкий", "Зарайский"},
    "Kolomna station": {"Коломенский", "Раменский", "Воскресенский", "Егорьевский", "Луховицкий", "Озерский", "Ступинский"},
    "Egorievsk station": {"Егорьевский", "Луховицкий", "Коломенский", "Воскресенский", "Орехово-Зуевский", "Шатурский"},
    "Orehovo station": {"Орехово-Зуевский", "Шатурский", "Егорьевский", "Воскресенский", "Раменский", "Павлово-Посадский", "Ногинский"},
    "Noginsk": {"Ногинский", "Павлово-Посадский", "Раменский", "Люберецкий", "Москва", "Щёлковский", "Пушкинский"},
    "Dmitrov station": {"Дмитровский", "Талдомский", "Сергиево-Посадский", "Пушкинский", "Москва", "Солнечногорский", "Клинский"},
    "Sun station": {"Солнечногорский", "Клинский", "Дмитровский", "Москва", "Красногорский", "Истринский"},
    "Istra": {"Истринский", "Клинский", "Солнечногорский", "Красногорский", "Одинцовский", "Рузский", "Волоколамский"},
    "Ruza": {"Рузский", "Волоколамский", "Истринский", "Одинцовский", "Наро-Фоминский", "Можайский"},
    "Volokolamsk station": {"Волоколамский", "Клинский", "Истринский", "Рузский", "Можайский", "Шаховский", "Лотошинский"},
    "Mozaisk": {"Можайский", "Шаховский", "Волоколамский", "Рузский", "Наро-Фоминский"}
}

# составим множество районов, которым требуется радиовещание
districts = set()
for a in stations.values():
    for b in a:
        districts.add(b)

# итоговый набор станций
result = set()

"""ОСНОВНОЙ ЦИКЛ."""
while districts:                                                                            # пока множество районов требует покрытия цикл продолжается
    # определение лучшей станции
    best_station = None
    districts_covered = set()
    for station, district_for_station in stations.items():
        covered = districts & district_for_station                                          # пересечение двух множеств. Так ищем покрытие станции, которая итеративно идёт в цикле.
        if len(covered) > len(districts_covered):                                           # проверяется условие для определения лучшей станции
            best_station = station
            districts_covered = covered
    result.add(best_station)
    # обновим множество районов, которым требуется радиовещание
    districts -= districts_covered

"""ВЫВОД СТАНЦИЙ В stdout."""
print()
for i in sorted(list(result)):
    print(i)
print()
		</pre>
	</body>
</html>