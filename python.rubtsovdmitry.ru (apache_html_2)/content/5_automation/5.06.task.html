<!DOCTYPE html>
<html lang="ru">
	<head>
		<meta name="Dmitry Rubtsov." content="Dmitry Rubtsov.">
		<meta name="generator" content="Bluefish 2.2.14" >
		<meta charset="utf-8">
		<meta name="robots" content="noindex, nofollow">
		<link rel="stylesheet" href="../content.css">		
		<title> 6. Телефоны одного формата. </title>		
	</head>
	<body>
		<h1> 6. Телефоны одного формата. </h1>
		<div> <a class="link_task" href="./5.06.task.html" target="_blank"> (открыть в новой вкладке) </a> </div>
		<hr>
		<div> 
			<span> Условие: </span> <br>
			<hr>			
			Программа должна открыть файл "Сложный_список_телефонов.txt". Привести все телефоны к одному формату и вывести на экран все телефоны без повторов. <br>
			<a href="../../add/Сложный_список_телефонов.txt" download="Сложный список телефонов"> ⇒ Сложный список телефонов </a>						
		</div>		
		<hr>
		<div>
			<span> Код: </span>
		</div>
		<hr>
		<pre>
import re

# функция приводит все телефоны к одному виду
def my_def(i):
    i = [x for x in i if x != ""]                                                         # уберём пустые элементы
    result = "+7"
    for x in i:
        result += x
    return result


buf = open("./Сложный_список_телефонов.txt", "r")
s = buf.read()

regex_obj = re.compile(r"""[78]\s\((\d{3})\)\s(\d{3})\s(\d{2})\s(\d{2})                   # составим регулярное выражение для поиска телефона вида: "8 (999) 031 31 32"
                       | [78](\d{10})                                                     # составим регулярное выражение для поиска телефона вида: " 79005552543"
                       | [78]\s\((\d{3})\)\s(\d{3})\-(\d{2})\-(\d{2})                     # составим регулярное выражение для поиска телефона вида: "7 (999) 031-31-32"
                       | [78]\s\((\d{3})\)\s(\d{7})                                       # составим регулярное выражение для поиска телефона вида: "7 (499) 7816448"
                       | [78]\s(\d{3})\s(\d{3})\s(\d{2})\s(\d{2})                         # составим регулярное выражение для поиска телефона вида: "8 916 599 87 17"
                       | [78]\-(\d{3})-(\d{3})-(\d{2})\-(\d{2})                           # составим регулярное выражение для поиска телефона вида: "7-499-717-78-04"
                       | \+\d(\d{10})                                                     # составим регулярное выражение для поиска телефона вида: "+79158611430"
                       """, re.VERBOSE)                   
x = regex_obj.findall(s)                                                                  # список телефонов, получился список кортежей вида [('999', '031', '31', '32', ''), ('', '', '', '', '9005552543')]

x = {my_def(i) for i in x}                                                                # подготовит множество телефонов в нужном виде и без дубликатов

# выведем телефоны на экран
count = 1
for i in x:
    print(f"№ {count}:   {i}")
    count += 1		
		</pre>
	</body>
</html>